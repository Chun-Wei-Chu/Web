<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="multiSelect.css">
<script src="multiSelect.js"></script>

  <div class="col-xs-2">
    <div id="Freq-container" style="width:10%;display:inline-block;">
      <select id="Freq" multiple="multiple" class="form-control input-lg">123
        <option value="0">All</option>
        <option value="1">Tick</option>
        <option value="2">1Min</option>
        <option value="3">5Min</option>
        <option value="4">10Min</option>
        <option value="5">15Min</option>
        <option value="6">30Min</option>
        <option value="7">60Min</option>
        <option value="8">D</option>
        <option value="9">W</option>
        <option value="10">M</option>
        <option value="11">AdjustD</option>
        <option value="12">AdjustW</option>
        <option value="13">AdjustM</option>
        <option value="14">Quarter</option>
        <option value="15">HalfYear</option>
        <option value="16">Year</option>
        <option value="999">BaseField</option>
      </select>
    </div>
  </div>

<div class="col-xs-2">
  <div class="dropdown">
    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
    <input type="text" class="form-control" style="display:inline-block" Placeholder="test"></input>
    <span class="caret"></span></button>
    <ul class="dropdown-menu">
      <li value="HTML"><a href="#">HTML</a></li>
      <li value="CSS"><a href="#">CSS</a></li>
      <li value="JavaScript"><a href="#">JavaScript</a></li>
    </ul>
  </div>
</div>


<script>
  可輸入字串的button 
  $("ul li").click(function()
  {
    this.parentNode.parentNode.children[0].children[0].value=this.getAttribute("value");
  });
  
  //multiSelect
  var multiSelect_All_switch=0;
  $('#Freq').multiselect({
    Height: "300px",
    buttonWidth: "100%",
    nonSelectedText: "Freq",
    buttonClass : "btn btn-default dropdown-toggle btn_height",
    ulClass: "btn_height",
    onChange: function(element, checked)
    {
      if(element.val()==0)
      {
        multiSelect_All_switch^=1;
        for(var i=1; i<Freq.length;i++)
        {
          var input = $('#Freq-container input[value="' + Freq[i] + '"]');
          var option = $('#Freq-container option[value="' + Freq[i] + '"]');

          input.parent('label').parent('a').parent('li').attr("class", "");
          option.removeAttr("selected");
          //因為選ALL時要嘛權選要嘛只選一個 所以顯示上預設都不選以避免太多問題發生
          input.attr("checked", false);

          input.prop('disabled', multiSelect_All_switch);
          option.prop('disabled', multiSelect_All_switch);


        }
      }
      /*
      var brands = $('#Freq option:selected');
        var selected = [];
        $(brands).each(function(index, brand){
          selected.push([$(this).val()]);
        });
      console.log(selected);
      */
    }
  });
</script>
